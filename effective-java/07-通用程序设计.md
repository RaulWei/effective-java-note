# 07-通用程序设计

---

- [第45条：将局部变量的作用域最小化](#第45条将局部变量的作用域最小化)
- [第46条：for-each循环优先于传统的for循环](#第46条for-each循环优先于传统的for循环)
- [第47条：了解和使用类库](#第47条了解和使用类库)

---

## 第45条：将局部变量的作用域最小化

1. 在**第一次使用它的地方声明**，过早声明局部变量不仅使它作用域过早扩展，而且结束也过晚
2. 几乎每个**局部变量声明都应该包含一个初始化表达式**，如果没有足够信息进行有意义的初始化就该**推迟**声明
   - `try-catch`相关的特例
   - `for`优于`while`
3. 使方法**小而集中**，如果把两个操作合并到一个方法，与其中一个操作相关的局部变量可能出现在执行另一个操作的代码范围内，为防止这种情况，我们把方法拆成两个，每个方法执行一个操作

## 第46条：for-each循环优先于传统的for循环

`for-each`循环在**简洁性**和**预防Bug**方面有着传统`for`循环无法比拟的优势！

在对多个集合进行嵌套迭代时，`for`容易出错
```Java
enum Suit { CLUB, DIAMOND, HEART, SPADE }
enum Rank { ACE, DEUCE, THREE, FOUR, FIVE, SIX }
Collection<Suit> suits = Arrays.asList(Suit.values());
Collection<Rank> ranks = Arrays.asList(Rank.values());

List<Card> deck = new ArrayList<Card> ();
for (Iterator<Suit> i = suits.iterator(); i.hasNext(); )
	for (Iterator<Rank> j = ranks.iterator(); j.hasNext(); )
		deck.add(new Card(i.next(), j.next()));
```

如果使用`for-each`循环，既没有bug，又简洁
```Java
for (Suit suit: suits)
	for (Rank rank: ranks)
		deck.add(new Card(suit, rank));
```

无法使用`for-each`循环的情况
1. 过滤 - 遍历集合并**删除**选定元素
2. 转换 - 遍历集合并**取代**部分或全部元素值
3. 平行迭代 - 并行地遍历多个集合

## 第47条：了解和使用类库

使用类库的好处
1. 使用标准类库可充分利用前人的专业知识和经验
2. 不必浪费时间为那些与工作**不太相关**的问题提供**特别的解决方案**
3. 类库**性能**往往随时间推移而提高
4. 可使自己的代码**融入主流**，更易读，更易维护，更易被重用